(self.webpackChunk=self.webpackChunk||[]).push([[143],{8144:(e,a,t)=>{var s=t(9755);t(9826),t(1539),t(2564),t(4916),t(5306),t(1693),t(7632),t(8471),t(3084),t(9174),t(1033),s(document).ready((function(){s('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"}),s("body").on("click",".checkbox-toggle",(function(){var e=s(this).data("clicks");e?(s(".mailbox-messages input[type='checkbox']").iCheck("uncheck"),s(".fa",this).removeClass("fa-check-square-o").addClass("fa-square-o")):(s(".mailbox-messages input[type='checkbox']").iCheck("check"),s(".fa",this).removeClass("fa-square-o").addClass("fa-check-square-o")),s(this).data("clicks",!e)})),s(".trash").on("click",(function(e){s(e.currentTarget);s(".mailbox-messages input[type='checkbox']:checked").each((function(e,a){var t=s(a);s.ajax({url:t.data("link"),method:"delete"}).then((function(e){t.parents("tr").remove()}))}))})),s(".mark-read").on("click",(function(e){s(e.currentTarget);s(".mailbox-messages input[type='checkbox']:checked").each((function(e,a){var t=s(a);t.parents("tr").hasClass("read")||s.ajax({url:t.parents("tr").data("markread"),method:"put"}).then((function(e){t.parents("tr").addClass("read")}))}))}));var e=null;s("body").on("click",".mailbox-messages table tbody > tr",(function(a){var t=s(a.currentTarget),l=t.find("script.html-email").html();console.log("setting html to",l);var c=t.find("script.text-email").html(),i=t.find(".mailbox-attachment > a");if(e&&clearTimeout(e),t.hasClass("read")||(e=setTimeout((function(){s.ajax({url:t.data("markread"),method:"put"}).then((function(e){t.addClass("read")}))}),2e3)),s("body").addClass("sidebar-collapse").trigger("collapsed.pushMenu"),s(".email-display").addClass("col-md-8").css("display","flex").find(".box-title").html(t.data("title")),s(".email-list").removeClass("col-md-12").addClass("col-md-4"),s("#html-content .no-content").remove(),l.replace(/\s/g,"").length>0){var n=s("#email-display-iframe");n.contents().find("html").html(l),n.show()}else s("#email-display-iframe").hide(),s("#html-content").append('<div class="no-content"><p>Aucun contenu HTML pour cet email</p></div>');c.replace(/\s/g,"").length>0?s("#text-content").html('<div class="email-text-content"><p>'+c.replace(/\n/gi,"<br>\n")+"</p></div>"):s("#text-content").html('<div class="no-content"><p>Aucun contenu texte pour cet email</p></div>'),s("#raw-content").html('<div class="email-text-content"><p>'+t.find("script.raw-email").html().replace(/\n/gi,"<br>\n")+"</p></div>");var o=s(".email-display .box-footer");o.html(""),o.hide(),i.length>0&&(o.show(),i.each((function(e,a){var t=s(a);o.append(t.clone())})))})).on("click",".email-close",(function(e){s(".email-display").removeClass("col-md-8").css("display","none"),s(".email-list").addClass("col-md-12").removeClass("col-md-4"),s(".mailbox-firstline").show(),s("body").removeClass("sidebar-collapse").trigger("expanded.pushMenu");var a=s(".email-display .box-footer");a.html(""),a.hide()})),setInterval((function(){var e=s(".mailbox-messages table tbody > tr").first().data("id");s.get("emails/new/"+e).then((function(e){console.log(e),s(".mailbox-messages table tbody").prepend(e),s('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})}))}),1e4)}))},9174:(e,a,t)=>{"use strict";t.r(a)}},e=>{e.O(0,[196],(()=>{return a=8144,e(e.s=a);var a}));e.O()}]);